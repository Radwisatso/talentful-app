### Variables
@baseUrl = http://localhost:3000
@employeeToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjMyLCJlbWFpbCI6ImpvaG4uZG9lQGNvbXBhbnkuY29tIiwibmFtZSI6IkpvaG4gRG9lIiwicm9sZSI6IkVNUExPWUVFIiwiaWF0IjoxNzU0Nzk5NDM1LCJleHAiOjE3NTQ4MDMwMzV9.2I0ROus2aT9PxpGhotSaYBeK-N_l2lBQz7Mu_IAszbM
@adminToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjMxLCJlbWFpbCI6ImFkbWluQGNvbXBhbnkuY29tIiwibmFtZSI6IkFkbWluIEhSRCIsInJvbGUiOiJBRE1JTiIsImlhdCI6MTc1NDcyNTMzMSwiZXhwIjoxNzU0NzI4OTMxfQ.iaUHVHwDqqlqSBerUGQ9XilO9S9TLV94ryNsDiw-yBE

### ========================================
### UNIVERSAL ENDPOINTS (Smart Role Detection)
### ========================================

### Employee Check In (No employeeId = use own ID)
POST {{baseUrl}}/attendances/checkin
Authorization: Bearer {{employeeToken}}
Content-Type: application/json

{
  "date": "2025-01-10T08:00:00.000Z",
  "time": "2025-01-10T08:00:00.000Z"
}

### Admin Check In for Self (No employeeId = use own ID)
POST {{baseUrl}}/attendances/checkin
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "date": "2025-01-09T08:00:00.000Z",
  "time": "2025-01-09T08:00:00.000Z"
}

### Admin Check In for Other Employee (Specify employeeId)
POST {{baseUrl}}/attendances/checkin
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "employeeId": 2,
  "date": "2025-01-09T08:00:00.000Z",
  "time": "2025-01-09T08:30:00.000Z"
}

### Employee Check Out (No employeeId = use own ID)
POST {{baseUrl}}/attendances/checkout
Authorization: Bearer {{employeeToken}}
Content-Type: application/json

{
  "date": "2025-01-10T08:00:00.000Z",
  "time": "2025-01-10T17:00:00.000Z"
}

### Admin Check Out for Other Employee
POST {{baseUrl}}/attendances/checkout
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "employeeId": 2,
  "date": "2025-01-09T08:00:00.000Z",
  "time": "2025-01-09T17:30:00.000Z"
}

### Employee Get Own Summary (No employeeId = own summary)
GET {{baseUrl}}/attendances/summary?startDate=2025-01-01&endDate=2025-12-31
Authorization: Bearer {{employeeToken}}

### Admin Get Own Summary (No employeeId = own summary)
GET {{baseUrl}}/attendances/summary?startDate=2025-01-01&endDate=2025-01-31
Authorization: Bearer {{adminToken}}

### Admin Get Other Employee Summary (Specify employeeId)
GET {{baseUrl}}/attendances/summary?employeeId=2&startDate=2025-01-01&endDate=2025-01-31
Authorization: Bearer {{adminToken}}

### Employee Get Own Records (No employeeId = own records)
GET {{baseUrl}}/attendances/records
Authorization: Bearer {{employeeToken}}

### Admin Get Other Employee Records
GET {{baseUrl}}/attendances/records?employeeId=2
Authorization: Bearer {{adminToken}}

### Admin Get All Attendances (Admin Only)
GET {{baseUrl}}/attendances/all
Authorization: Bearer {{adminToken}}

### ========================================
### SECURITY TESTS
### ========================================

### Employee trying to checkin for others (should ignore employeeId)
POST {{baseUrl}}/attendances/checkin
Authorization: Bearer {{employeeToken}}
Content-Type: application/json

{
  "employeeId": 999,
  "date": "2025-01-09T08:00:00.000Z",
  "time": "2025-01-09T08:00:00.000Z"
}

### Employee trying to get other's summary (should get own)
GET {{baseUrl}}/attendances/summary?employeeId=2
Authorization: Bearer {{employeeToken}}

### Employee trying admin endpoint - Should Return 403
GET {{baseUrl}}/attendances/all
Authorization: Bearer {{employeeToken}}